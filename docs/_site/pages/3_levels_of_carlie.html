<!DOCTYPE html> <!-- rundocs.io, theme: jekyll-rtd-theme, based on v1.1.7 --> <html class="writer-html5" lang="en"> <head> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"> <meta content="IE=Edge" http-equiv="X-UA-Compatible"> <title>The 3 Levels of Carlie · Carlie Documentation (ACRV)</title> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } function debug() { console.debug.apply(console, arguments); } gtag("js", new Date()); if ("serviceWorker" in navigator) { navigator.serviceWorker.register("/sw.caches.js"); } else { debug("Service Worker not supported!"); } </script> <!-- meta --> <meta name="description" content="The 3 Levels of Carlie The Carlie platform exists of 3 levels in both its hardware and software design. These levels are: The low-level layer The b..."> <meta name="author" content="RoboticVisionOrg"> <meta name="revised" content="d3633ad"> <meta name="generator" content="jekyll-rtd-theme v1.1.7"> <!-- meta-ogp --> <meta property="og:title" content="The 3 Levels of Carlie · Carlie Documentation (ACRV)"> <meta property="og:description" content="The 3 Levels of Carlie The Carlie platform exists of 3 levels in both its hardware and software design. These levels are: The low-level layer The b..."> <meta property="og:locale" content="en"> <meta property="og:url" content="http://localhost:4000/pages/3_levels_of_carlie.html"> <meta property="og:type" content="article"> <meta property="article:author" content="RoboticVisionOrg"> <meta property="article:published_time" content="2020-09-11T22:24:17+10:00"> <meta property="article:modified_time" content="2020-09-11T22:24:17+10:00"> <!-- meta-custom --> <!-- schema --> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Article", "mainEntityOfPage": { "@type": "WebPage", "@id": "http://localhost:4000/pages/3_levels_of_carlie.html" }, "headline": "The 3 Levels of Carlie · Carlie Documentation (ACRV)", "image": [], "author": { "@type": "Person", "name": "RoboticVisionOrg" }, "datePublished": "2020-09-11T22:24:17+10:00", "dateModified": "2020-09-11T22:24:17+10:00", "publisher": { "@type": "Organization", "name": "RunDocs", "logo": { "@type": "ImageObject", "url": "https://rundocs.io/logo.png" } }, "description": "The 3 Levels of Carlie The Carlie platform exists of 3 levels in both its hardware and software design. These levels are: The low-level layer The b..." } </script> <!-- link --> <link rel="canonical" href="http://localhost:4000/pages/3_levels_of_carlie.html"> <link rel="prev" href="http://localhost:4000/pages/carlie_running_existing_capabilities.html"> <!-- theme --> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@1.1.7/assets/css/theme.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@1.1.7/assets/css/rougify/github.css"> <style>.shadow-box,.album .item img,.admonition{box-shadow:0 1px 1px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2)}.flex,.album,.album .item{display:-webkit-flex;display:flex;flex-wrap:wrap;flex-direction:row}.album .item{flex:auto;margin:10px;justify-content:center}.album .item:hover{opacity:0.9}.album .item img{width:100%}.wy-embed-wrap{width:100%;padding:1em 1.5em;font-size:14px;line-height:20px}.wy-embed-wrap .wy-embed{text-align:center;padding:1em;color:#c2c2c2;background:#4e4b4b;border:1px solid #a0a0a0;border-radius:5px}.wy-embed-wrap .wy-embed a{color:#e6e6e6}.wy-embed-wrap .wy-embed img{max-width:100%}p{font-size:15px}footer p{font-size:14px;text-align:center}.progress:after{display:inline-block;content:"\2026";width:0;overflow:hidden;vertical-align:bottom;animation:ellipsis steps(4, end) 1000ms infinite}@keyframes ellipsis{to{width:1.25em}}.fa-angle-double-right{font-size:13px}.rst-versions.shift-up{overflow-y:auto}.wy-nav-side{padding-bottom:3em}.wy-nav-top{padding:0}.wy-nav-top .flex,.wy-nav-top .album,.wy-nav-top .album .item,.album .wy-nav-top .item{align-items:center}.wy-nav-top .flex i,.wy-nav-top .album i,.album .wy-nav-top .item i{padding:10px;font-size:20px}.wy-nav-top .flex .wy-nav-title,.wy-nav-top .album .wy-nav-title,.album .wy-nav-top .item .wy-nav-title{flex:auto}.wy-nav-top .flex .wy-nav-title a,.wy-nav-top .album .wy-nav-title a,.album .wy-nav-top .item .wy-nav-title a{margin-left:-30px;padding:10px}.wy-menu-vertical li.toctree-l1.current li.toctree-l2>a{display:-webkit-flex;display:flex;align-items:center}.wy-menu-vertical li.toctree-l1.current li.toctree-l2>a span{padding-right:3px}.wy-menu-vertical li.toctree-l2.current li.toctree-l3>a{display:-webkit-flex;display:flex;align-items:center}.wy-menu-vertical li.toctree-l2.current li.toctree-l3>a span{padding-right:3px}.wy-menu-vertical li.toctree-l3.current li.toctree-l4>a{display:-webkit-flex;display:flex;align-items:center}.wy-menu-vertical li.toctree-l3.current li.toctree-l4>a span{padding-right:3px}.wy-menu-vertical li.toctree-l4.current li.toctree-l5>a{display:-webkit-flex;display:flex;align-items:center}.wy-menu-vertical li.toctree-l4.current li.toctree-l5>a span{padding-right:3px}.wy-menu-vertical li.toctree-l5.current li.toctree-l6>a{display:-webkit-flex;display:flex;align-items:center}.wy-menu-vertical li.toctree-l5.current li.toctree-l6>a span{padding-right:3px}.wy-menu-vertical li.toctree-l6.current li.toctree-l7>a{display:-webkit-flex;display:flex;align-items:center}.wy-menu-vertical li.toctree-l6.current li.toctree-l7>a span{padding-right:3px}.wy-menu-vertical li.toctree-l7.current li.toctree-l8>a{display:-webkit-flex;display:flex;align-items:center}.wy-menu-vertical li.toctree-l7.current li.toctree-l8>a span{padding-right:3px}.wy-menu-vertical li.toctree-l8.current li.toctree-l9>a{display:-webkit-flex;display:flex;align-items:center}.wy-menu-vertical li.toctree-l8.current li.toctree-l9>a span{padding-right:3px}.wy-menu-vertical li.toctree-l9.current li.toctree-l10>a{display:-webkit-flex;display:flex;align-items:center}.wy-menu-vertical li.toctree-l9.current li.toctree-l10>a span{padding-right:3px}.wy-menu-vertical li.toctree-l10.current li.toctree-l11>a{display:-webkit-flex;display:flex;align-items:center}.wy-menu-vertical li.toctree-l10.current li.toctree-l11>a span{padding-right:3px}.wy-nav-content{max-width:900px}.rst-content .mermaid,.rst-content ol,.rst-content ul{overflow-x:auto}.rst-content a code.literal{color:#2980b9}.rst-content code,.rst-content div[class^=highlight] pre,.rst-content pre{font-family:monospace;font-size:12px}.rst-content blockquote{padding:0 1em;color:#6a737d;border-left:0.25em solid #dfe2e5}.rst-content .rundocs{display:none}.rst-content .highlighted-box{border:1px solid #f1c40f}.wy-table-responsive table td{white-space:initial}#search-results .context{word-break:break-all}#search-results li:last-child{border-bottom:0;padding-bottom:0}@media screen and (max-width: 768px){.wy-nav-content-wrap .wy-nav-content{padding:1em}}@media screen and (max-width: 480px){.wy-breadcrumbs li.wy-breadcrumbs-aside{display:initial}}</style> <!-- icon --> <link rel="icon" type="image/svg+xml" href="/favicon.svg"> <!-- script --> <!--[if lt IE 9]><script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@1.1.7/assets/js/html5shiv.min.js"></script><![endif]--> <script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@1.1.7/assets/js/jquery.min.js"></script> <script> const ui = { baseurl: "", title: "Carlie Documentation (ACRV)", lang: "en", admonition: { note: "Note", tip: "Tip", warning: "Warning", danger: "Danger" } }; </script> </head> <body class="wy-body-for-nav"> <div class="wy-grid-for-nav"> <!-- NAV --> <nav data-toggle="wy-nav-shift" class="wy-nav-side"> <div class="wy-side-scroll"> <div class="wy-side-nav-search"> <a href="/" class="icon icon-home"> Carlie Documentation (ACRV)</a> <div class="version"></div> <div role="search"> <form id="rtd-search-form" class="wy-form" action="/search.html" method="get" autocomplete="off"> <input type="text" name="q" placeholder="Search Docs..."> <input type="hidden" name="lang" value="en"> </form> </div> </div> <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation"> <ul> </ul> <p class="caption"><span class="caption-text">Carlie Documentation</span></p><ul> <li class="toctree-l1 " data-sort="1" data-level="1"> <a class="reference internal " href="/pages/power_management.html">1. Carlie Power Management</a> </li><li class="toctree-l1 " data-sort="2" data-level="1"> <a class="reference internal " href="/pages/starting_up_carlie.html">2. Starting Up and Driving Carlie</a> </li><li class="toctree-l1 " data-sort="3" data-level="1"> <a class="reference internal " href="/pages/carlie_networking_interfaces.html">3. Carlie Networking Interfaces</a> </li><li class="toctree-l1 " data-sort="4" data-level="1"> <a class="reference internal " href="/pages/carlie_config_and_calibration.html">4. Carlie Config and Calibration</a> </li><li class="toctree-l1 " data-sort="5" data-level="1"> <a class="reference internal " href="/pages/carlie_running_existing_capabilities.html">5. Running Existing Demos and Capabilities on Carlie</a> </li><li class="toctree-l1 current" data-sort="7" data-level="1"> <a class="reference internal current" href="/pages/3_levels_of_carlie.html">7. The 3 Levels of Carlie</a> </li></ul> </div></div> </nav> <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"> <!-- MOBILE NAV --> <nav class="wy-nav-top" aria-label="top navigation"> <div class="flex"> <i data-toggle="wy-nav-top" class="fa fa-bars"></i> <div class="wy-nav-title"> <a href="/">Carlie Documentation (ACRV)</a> </div> </div> </nav> <div class="wy-nav-content"> <div class="rst-content"> <div role="navigation" aria-label="breadcrumbs navigation"> <ul class="wy-breadcrumbs"> <li> <a href="/" class="icon icon-home"></a><i class="fa fa-angle-double-right"></i> </li> <li> <a href="/pages/">Pages</a><i class="fa fa-angle-double-right"></i> </li> <li>The 3 Levels of Carlie</li><li class="wy-breadcrumbs-aside"> <a href="https://github.com/RoboticVisionOrg/carlie_docs/edit/gh-pages/pages/3_levels_of_carlie.md" class="fa fa-edit" target="_blank"></a> </li></ul> <hr> </div> <div role="main" itemscope="itemscope" itemtype="http://schema.org/Article"> <div class="document" itemprop="articleBody"><div class="section"><h1 id="the-3-levels-of-carlie">The 3 Levels of Carlie</h1> <p>The Carlie platform exists of 3 levels in both its hardware and software design. These levels are:</p> <ol> <li>The low-level layer</li> <li>The base layer</li> <li>The sensor layer</li> </ol> <p>We have developed these layers to allow you to develop the fourth level, the application layer, as easily as possible. However, we have also developed Carlie with this 3 level principle to allow you to change components easily, such as the computation module or the sensors. Please note, we will sometimes use the term ‘high-level' to refer to the combination of the base and sensor layers.</p> <h2 id="the-low-level-layer">The Low-Level Layer</h2> <p>The low-level layer consists of all the hardware and software components required to make the platform physically move. This includes:</p> <ul> <li>A power management system</li> <li>A Vedder Electronic Speed Control (VESC) board to manage the brushless motor</li> <li>A micro-controller to interface to various low-level hardware components, such as the VESC and GPS</li> <li>A tachometer, steering angle, IMU, GPS and proximity sensors</li> <li>A control interface via the standard RC remote (meaning a computer does not need to be connected to allow Carlie to be tele-operated)</li> <li>A motor emergency stop button</li> </ul> <p>The micro-controller acts as a ROS node and publishes and subscribes to the following topics:</p> <ul> <li>The <strong>/carlie/ackermann_cmd</strong> topic - contains the control values to be performed, such as the linear velocity and steering angle.</li> <li>blah blah blah</li> </ul> <p>The Carlie platform could have been built without the micro-controller, but this would mean the computer would have been required to connect with all the above sensors listed as well as the VESC. By having a micro-controller take care of these interfaces and to perform some preliminary filtering/analysis of the data, it means that only a single connection is required by the computer to control the movement of the platform. Additionally, this means that the computer can easily be swapped out for a different device and all that is required to control the car is a single USB and the carlie_base ROS package to be installed. The figure below shows how the low-level hardware components are connected.</p> <p><img src="assets/HardwareArchitecture.png" alt="" /></p> <h2 id="the-base-layer">The Base Layer</h2> <p>The base layer contains the computer as well as the ROS software required to communicate with the low-level hardware. Therefore, this base layer controls the movement of the platform via a computer interfacing with the low-level layer. The base layer consists of the computer and two ROS packages, <a href="https://github.com/RoboticVisionOrg/carlie_msgs"><strong>carlie_msgs</strong></a> and <a href="https://github.com/RoboticVisionOrg/carlie_base"><strong>carlie_base</strong></a>.</p> <p>The <a href="https://github.com/RoboticVisionOrg/carlie_msgs"><strong>carlie_msgs</strong></a> ROS package contains the message definitions for custom topics used to transfer data between the computer and the micro-controller on the low level. These message types are:</p> <ul> <li>The <strong>CarlieConfig</strong> and <strong>CarlieConfigStamped</strong> - contains data/values used to configure characteristics of the platform, such as the maximum velocity.</li> <li>The <strong>CarlieRawMotionData</strong> and <strong>CarlieRawMotionDataStamped</strong> - contains raw tachometer and motor RPM values provided by the VESC.</li> <li>The <strong>CarlieRawOdom</strong> and <strong>CarlieRawOdomStamped</strong> - contains the current estimate for the linear and angular velocity computed by the micro-controller (the standard ROS odometry message was to data heavy to be passed between the computer and the micro-controller at suitable frequencies).</li> <li>The <strong>CarlieRawProximityData</strong> and <strong>CarlieRawProximityDataStamped</strong> - contains the raw proximity data provided by the short range LIDAR sensors.</li> <li>The <strong>CarlieStatus</strong> and <strong>CarlieStatusStamped</strong> - contains data/values stating the current state of the low-level system, such as whether movement is currently enabled.</li> </ul> <p>The <a href="https://github.com/RoboticVisionOrg/carlie_base"><strong>carlie_base</strong></a> ROS package contains three nodes and a singular launch file. The three nodes are:</p> <ul> <li>The <strong>config_node</strong> - attempts to set the Carlie config values on the micro-controller to be those specified by the ROS parameter server.</li> <li>The <strong>low_level_converter_node</strong> - converts topics coming from the micro-controller that are not in standard ROS message formats, such as the raw odometry data.</li> <li>The <strong>driver_node</strong> - which listens to the <em>joy</em> and <em>/carlie/ackermann_cmd/autonomous</em> topics and publishes the <em>/carlie/ackermann_cmd</em>, <em>/carlie/ackermann_cmd/teleop</em> and <em>/carlie/estop/gamepad</em> topics. The node also multiplexes the right- and left-bumpers of the Logitech F710 gamepad to enable hassle-free transition between the tele-operation and autonomous modes. If the right-bumper is held-down the <em>/carlie/ackermann_cmd/teleop</em> topic is copied into the <em>/carlie/ackermann_cmd</em> topic which is then passed onto the micro-controller. If the left-bumper is held-down the <em>/carlie/ackermann_cmd/autonomous</em> topic is copied into the <em>/carlie/ackermann_cmd</em> topic and then passed onto the micro-controller. If both right- and left-bumper or neither button is held down the <em>/nightrider/estop/gamepad</em> topic is set to false and the speed within the <em>/carlie/ackermann_cmd</em> topic is set to zero.</li> </ul> <p>The figure below shows the nodes, topics and connections when the base layer and low-level ROS packages are running.</p> <h2 id="the-sensor-layer">The Sensor Layer</h2> </div></div> </div> <footer><div class="rst-footer-buttons" role="navigation" aria-label="footer navigation"><a href="/pages/carlie_running_existing_capabilities.html" class="btn btn-neutral float-left" title="Running Existing Demos and Capabilities on Carlie" accesskey="p" rel="prev"> <span class="fa fa-arrow-circle-left"></span> Previous</a></div><hr><div role="contentinfo" class="copyright"> <p> <i class="fa fa-copyright"></i> Copyright 2020, RoboticVisionOrg <span class="commit"> Revision <code>d3633ad</code> </span></p> </div><div role="contentinfo" class="copyright rundocs"> <p>Powered by <a href="https://rundocs.io">rundocs.io</a> using the jekyll docs theme <a href="https://rundocs.github.io/jekyll-rtd-theme">jekyll-rtd-theme</a></p> </div> </footer> </div> </div> </section> </div><div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions"> <span class="rst-current-version" data-toggle="rst-current-version"> <span class="fa fa-book"> Carlie Documentation (ACRV)</span> gh-pages <span class="fa fa-caret-down"></span> </span> <div class="rst-other-versions"><dl> <dt>GitHub</dt><dd><a href="https://github.com/RoboticVisionOrg/carlie_docs"><i class="fa fa-github"></i> Homepage</a></dd> <dd><a href="https://github.com/RoboticVisionOrg/carlie_docs/issues"><i class="fa fa-question-circle-o"></i> Issues</a></dd> <dd><a href="https://github.com/RoboticVisionOrg/carlie_docs/zipball/gh-pages"><i class="fa fa-download"></i> Download</a></dd></dl> <dl> <dt>Translations</dt><dd><a href="/"><i class="fa fa-language"></i> en</a> </dd></dl> <dl> <dt>Theme Plugins</dt> <dd><a href="https://rubygems.org/gems/jekyll-default-layout"><i class="fa fa-cog"></i> jekyll-default-layout</a></dd> <dd><a href="https://rubygems.org/gems/jekyll-readme-index"><i class="fa fa-cog"></i> jekyll-readme-index</a></dd> <dd><a href="https://rubygems.org/gems/jekyll-github-metadata"><i class="fa fa-cog"></i> jekyll-github-metadata</a></dd> <dd><a href="https://rubygems.org/gems/jekyll-titles-from-headings"><i class="fa fa-cog"></i> jekyll-titles-from-headings</a></dd> <dd><a href="https://rubygems.org/gems/jemoji"><i class="fa fa-cog"></i> jemoji</a></dd> <dd><a href="https://rubygems.org/gems/jekyll-avatar"><i class="fa fa-cog"></i> jekyll-avatar</a></dd> <dd><a href="https://rubygems.org/gems/jekyll-mentions"><i class="fa fa-cog"></i> jekyll-mentions</a></dd> </dl> <dl> <dt>Statistics</dt> <dd> <a href="https://github.com/rundocs/analytics" target="_blank"> Total visits: <span id="counter"><span class="progress"></span></span> <i class="fa fa-eye"></i> </a> </dd> </dl> <script> $(document).ready(function() { let analytics = new URL("https://rundocs-analytics.glitch.me/collect?v=1.1.7&lang=en"); analytics.searchParams.append("user_lang", navigator.language); analytics.searchParams.append("host", location.host); analytics.searchParams.append("platform", navigator.platform); $.getJSON(analytics.toString(), (data) => $("#counter").html(data.count)); }); </script> <hr> <small> <span> Built with <a href="https://jekyllrb.com/">Jekyll</a> using the <a href="https://github.com/rundocs/jekyll-rtd-theme">jekyll-rtd-theme</a> (MIT) </span> </small> </div> </div> <!-- script --> <script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@1.1.7/assets/js/anchor.min.js"></script> <script> $(document).ready(function() { function initialize(name) { let link = $(".wy-menu-vertical").find(`[href="${decodeURI(name)}"]`); if (link.length > 0) { $(".wy-menu-vertical .current").removeClass("current"); link.addClass("current"); link.closest("li.toctree-l1").parent().addClass("current"); link.closest("li.toctree-l1").addClass("current"); link.closest("li.toctree-l2").addClass("current"); link.closest("li.toctree-l3").addClass("current"); link.closest("li.toctree-l4").addClass("current"); link.closest("li.toctree-l5").addClass("current"); } } function toggleCurrent(link) { let closest = link.closest("li"); closest.siblings("li.current").removeClass("current"); closest.siblings().find("li.current").removeClass("current"); closest.find("> ul li.current").removeClass("current"); closest.toggleClass("current"); } function toc() { $(".wy-menu-vertical li.current").append('<ul class="content-toc"></ul>').html(function() { let level = parseInt(this.dataset.level); let temp = 0; let stack = [$(this).find(".content-toc")]; $(".document").find("h2,h3,h4,h5,h6").each(function() { let anchor = $("<a/>").addClass("reference internal").text($(this).text()).attr("href", `#${this.id}`); let tagLevel = parseInt(this.tagName.slice(1)) - 1; if (tagLevel > temp) { let parent = stack[0].children("li:last")[0]; if (parent) { stack.unshift($("<ul/>").appendTo(parent)); } } else { stack.splice(0, Math.min(temp - tagLevel, Math.max(stack.length - 1, 0))); } temp = tagLevel; $("<li/>").addClass(`toctree-l${level + tagLevel}`).append(anchor).appendTo(stack[0]); }); if (!stack[0].html()) { stack[0].remove(); } }); } function set(name, value) { return localStorage.setItem(name, value); } function get(name) { return localStorage.getItem(name) || false; } function restore() { let scroll = get("scroll"); let scrollTime = get("scrollTime"); let scrollHost = get("scrollHost"); if (scroll && scrollTime && scrollHost) { if (scrollHost == location.host && (Date.now() - scrollTime < 6e5)) { $(".wy-side-scroll").scrollTop(scroll); } } $(".wy-side-scroll").scroll(function() { set("scroll", this.scrollTop); set("scrollTime", Date.now()); set("scrollHost", location.host); }); } function highlight() { let text = new URL(location.href).searchParams.get("highlight"); let box = ".highlighted-box"; if (text) { $(".section").find("*").each(function() { try { if (this.outerHTML.match(new RegExp(text, "im"))) { $(this).addClass("highlighted-box"); } } catch (e) { debug(e.message); } }); $(".section").find(box).each(function() { if (($(this).find(box).length > 0)) { $(this).removeClass(box); } }); } } anchors.add(); toc(); initialize(location.pathname); restore(); highlight(); /* nested ul */ $(".wy-menu-vertical ul").siblings("a").each(function() { let link = $(this); let expand = $('<span class="toctree-expand"></span>'); expand.on("click", function(e) { e.stopPropagation(); toggleCurrent(link); return false; }); link.prepend(expand); }); /* admonition */ $(".admonition-title").each(function() { $(this).html(ui.admonition[$(this).attr("ui")]); }); /* bind */ $(document).on("click", '[data-toggle="wy-nav-top"]', function() { $('[data-toggle="wy-nav-shift"]').toggleClass("shift"); $('[data-toggle="rst-versions"]').toggleClass("shift"); }); $(document).on("click", ".wy-menu-vertical .current ul li a", function() { $('[data-toggle="wy-nav-shift"]').removeClass("shift"); $('[data-toggle="rst-versions"]').toggleClass("shift"); toggleCurrent($(this)); }); $(document).on("scroll", function() { let start = $(this).scrollTop() + 5; let items = []; $(".document").find("h1,h2,h3,h4,h5,h6").each(function() { items.push({ offset: $(this).offset().top, id: this.id, level: parseInt(this.tagName.slice(1)) }); }); for (let i = 0; i < items.length; i++) { if (start > items[i].offset) { if (i < items.length - 1) { if (start < items[i + 1].offset) { if (items[i].level == 1) { initialize(location.pathname); } else { initialize("#" + items[i].id); } } } else { initialize("#" + items[i].id); } } } }); $(document).on("click", '[data-toggle="rst-current-version"]', function() { $('[data-toggle="rst-versions"]').toggleClass("shift-up"); }); $(window).bind("resize", function() { requestAnimationFrame(function() {}); }); $(window).bind("hashchange", () => initialize(location.hash || location.pathname)); }); </script> </body> </html>